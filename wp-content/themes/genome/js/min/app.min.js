$(function(){$('a[href^="mailto:"]').each(function(){this.href=this.href.replace("(at)","@").replace(/\(dot\)/g,"."),this.innerHTML=this.href.replace("mailto:","")})}),$(document).ready(function(e){function a(){e(".featured-list.with-shares").find("li").each(function(){var a=e(this),t=e(this).find("h3 > a"),o=0,n=0;addthis.sharecounters.getShareCounts({service:"facebook",countUrl:t.attr("href")},function(e){o++,n+=e.count,2===o&&i(a,n)}),addthis.sharecounters.getShareCounts({service:"twitter",countUrl:t.attr("href")},function(e){o++,n+=e.count,2===o&&i(a,n)})})}setTimeout(function(){e("body").removeClass("init").addClass("run")},500),e("html.js #main-navigation").accessibleMegaMenu();var t=e("#main-site-navigation-wrap");e(window).scroll(function(){var a=e(window).scrollTop();a>=640&&t.removeClass("menu-thick").addClass("menu-slim"),640>a&&t.removeClass("menu-slim").addClass("menu-thick")}),e(".hero .arrow-down").click(function(a){a.preventDefault(),e("html, body").animate({scrollTop:e("#top").offset().top-40},500,"swing")}),e('a[href^="#"]').on("click",function(a){a.preventDefault();var t=this.hash,o=e(t);e("html, body").stop().animate({scrollTop:o.offset().top},500,"swing",function(){window.location.hash=t})}),e(".open-g-door").on("click",function(a){e(".g-door").toggleClass("open"),t.toggleClass("push-for-door"),e(this).toggleClass("switch"),a.preventDefault()}),e(".close-g-door").on("click",function(a){e(".g-door").removeClass("open"),t.removeClass("push-for-door"),a.preventDefault()}),e("img.load").lazyload({effect:"fadeIn"}),e(function(){e(".rte-remote").each(function(){e(this).readingTime({readingTimeTarget:e(this).find(".eta"),remotePath:e(this).attr("data-file"),remoteTarget:e(this).attr("data-target")})})}),e(function(){var a=e("#rte-target .eta");e("#rte-target").readingTime({readingTimeTarget:a}),e(".article-header .eta-time").append(a)});var o=e("<span class='toggle-icon' data-icon='E'></span>");e(".collapse-header").append(o),e(function(){e(".collapse-header").click(function(){e(this).hasClass("open")?(e(this).next(".collapse-content").slideUp("slow"),e(this).removeClass("open")):(e(".collapse-header").not(this).next(".collapse-content").slideUp("slow"),e(".collapse-header").not(this).removeClass("open"),e(this).next(".collapse-content").slideDown("slow"),e(this).addClass("open"))})}),e(".slideshow").flexslider({animation:"slide",controlNav:!1,prevText:"",nextText:""}),e(".overlay-view-search").magnificPopup({type:"inline",mainClass:"mfp-zoom-in overlay-with-search-box",closeBtnInside:!1,preloader:!1,focus:"#nav-search-box",callbacks:{beforeOpen:function(){this.st.focus=e(window).width()<700?!1:"#nav-search-box"}}}),e(".overlay-view-image").each(function(){e(this).magnificPopup({type:"image",mainClass:"mfp-zoom-in overlay-with-image",tLoading:"",removalDelay:500,callbacks:{imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},16)},close:function(){this.wrap.removeClass("mfp-image-loaded")},beforeChange:function(){this.items[0].src=this.items[0].src+"?="+Math.random()}},closeBtnInside:!1,closeOnContentClick:!0,midClick:!0})}),e(".overlay-watch-video").each(function(){e(this).magnificPopup({type:"iframe",mainClass:"mfp-zoom-in overlay-with-video",removalDelay:500,preloader:!1,fixedContentPos:!0,closeBtnInside:!1,closeOnContentClick:!0,midClick:!0})}),e(".overlay-view-slideshow").magnificPopup({delegate:"a",type:"image",tLoading:"",mainClass:"mfp-zoom-in overlay-with-slideshow-slides",removalDelay:500,callbacks:{imageLoadComplete:function(){var e=this;setTimeout(function(){e.wrap.addClass("mfp-image-loaded")},16)},close:function(){this.wrap.removeClass("mfp-image-loaded")}},closeBtnInside:!1,closeOnContentClick:!0,midClick:!0,gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(e){return e.el.attr("title")}}}),addthis.addEventListener("addthis.ready",function(){a()});var i=function(a,t){t=e.number(t)+" ";var o=t+" "+(1===t?"share":"shares");a.find(".share-count").text(o)}});